---
import '../styles/globals.css';
const { title = 'stephy.gay' } = Astro.props;
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
  </head>
  <body class="light-theme">
    <div class="theme-toggle-bar">
      <button id="theme-toggle">Toggle Theme</button>
    </div>

    <slot />

    <script>
      const toggleBtn = document.getElementById('theme-toggle');
      const body = document.body;
      const setTheme = (theme: string) => {
        localStorage.setItem('theme', theme);
      };
      // On page load, use stored theme
      const stored = localStorage.getItem('theme');
      if (stored) {
        import(`../styles/${stored}.css`)
          .catch((err) => console.error(`Failed to load theme: ${err}`));
          
      } else {
        // Default to dark theme
        import('../styles/dark.css')
          .catch((err) => console.error(`Failed to load default theme: ${err}`));
        setTheme('dark');
      }
    </script>
  </body>
</html>
